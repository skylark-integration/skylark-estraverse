/**
 * skylark-estraverse - A version of estraverse that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define([],function(){"use strict";var n,l,r,y,x,_;function p(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?p(n):n);return r}function g(e,t){this.parent=e,this.key=t}function E(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function i(){}function S(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function b(e,t){return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function m(e,t){for(var n=e.length-1;0<=n;--n)if(e[n].node===t)return 1}function c(e,t){(new i).traverse(e,t)}function u(t,e){var n=function(e,t){for(var n,r,i=e.length,a=0;i;)t(e[r=a+(n=i>>>1)])?i=n:(a=r+1,i-=1+n);return a}(e,function(e){return e.range[0]>t.range[0]});return t.extendedRange=[t.range[0],t.range[1]],n!==e.length&&(t.extendedRange[1]=e[n].range[0]),0<=--n&&(t.extendedRange[0]=e[n].range[1]),t}return n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},l={Break:y={},Skip:x={},Remove:_={}},g.prototype.replace=function(e){this.parent[this.key]=e},g.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},i.prototype.path=function(){var e,t,n,r,i;function a(e,t){if(Array.isArray(t))for(n=0,r=t.length;n<r;++n)e.push(t[n]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)a(i,this.__leavelist[e].path);return a(i,this.__current.path),i},i.prototype.type=function(){return this.current().type||this.__current.wrap},i.prototype.parents=function(){for(var e=[],t=1,n=this.__leavelist.length;t<n;++t)e.push(this.__leavelist[t].node);return e},i.prototype.current=function(){return this.__current.node},i.prototype.__execute=function(e,t){var n=void 0,r=this.__current;return this.__current=t,this.__state=null,e&&(n=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=r,n},i.prototype.notify=function(e){this.__state=e},i.prototype.skip=function(){this.notify(x)},i.prototype.break=function(){this.notify(y)},i.prototype.remove=function(){this.notify(_)},i.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===t.fallback?this.__fallback=Object.keys:"function"==typeof t.fallback&&(this.__fallback=t.fallback),this.__keys=r,t.keys&&(this.__keys=Object.assign(Object.create(this.__keys),t.keys))},i.prototype.traverse=function(e,t){var n,r,i,a,o,s,l,p,c,u,f,h;for(this.__initialize(e,t),h={},n=this.__worklist,r=this.__leavelist,n.push(new E(e,null,null,null)),r.push(new E(null,null,null,null));n.length;)if((i=n.pop())===h){if(i=r.pop(),s=this.__execute(t.leave,i),this.__state===y||s===y)return}else if(i.node){if(s=this.__execute(t.enter,i),this.__state===y||s===y)return;if(n.push(h),r.push(i),this.__state!==x&&s!==x){if(o=(a=i.node).type||i.wrap,!(u=this.__keys[o])){if(!this.__fallback)throw new Error("Unknown node type "+o+".");u=this.__fallback(a)}for(p=u.length;0<=--p;)if(f=a[l=u[p]])if(Array.isArray(f)){for(c=f.length;0<=--c;)if(f[c]&&!m(r,f[c])){if(b(o,u[p]))i=new E(f[c],[l,c],"Property",null);else{if(!S(f[c]))continue;i=new E(f[c],[l,c],null,null)}n.push(i)}}else!S(f)||m(r,f)||n.push(new E(f,l,null,null))}}},i.prototype.replace=function(e,t){var a,n,r,i,o,s,l,p,c,u,f,h,m;function d(e){var t,n,r,i;if(e.ref.remove())for(n=e.ref.key,i=e.ref.parent,t=a.length;t--;)if((r=a[t]).ref&&r.ref.parent===i){if(r.ref.key<n)break;--r.ref.key}}for(this.__initialize(e,t),f={},a=this.__worklist,n=this.__leavelist,s=new E(e,null,null,new g(h={root:e},"root")),a.push(s),n.push(s);a.length;)if((s=a.pop())===f){if(s=n.pop(),void 0!==(o=this.__execute(t.leave,s))&&o!==y&&o!==x&&o!==_&&s.ref.replace(o),this.__state!==_&&o!==_||d(s),this.__state===y||o===y)return h.root}else{if(void 0!==(o=this.__execute(t.enter,s))&&o!==y&&o!==x&&o!==_&&(s.ref.replace(o),s.node=o),this.__state!==_&&o!==_||(d(s),s.node=null),this.__state===y||o===y)return h.root;if((r=s.node)&&(a.push(f),n.push(s),this.__state!==x)&&o!==x){if(i=r.type||s.wrap,!(c=this.__keys[i])){if(!this.__fallback)throw new Error("Unknown node type "+i+".");c=this.__fallback(r)}for(l=c.length;0<=--l;)if(u=r[m=c[l]])if(Array.isArray(u)){for(p=u.length;0<=--p;)if(u[p]){if(b(i,c[l]))s=new E(u[p],[m,p],"Property",new g(u,p));else{if(!S(u[p]))continue;s=new E(u[p],[m,p],null,new g(u,p))}a.push(s)}}else S(u)&&a.push(new E(u,m,null,new g(r,m)))}}return h.root},{Syntax:n,traversals:traversals,replace:function(e,t){return(new i).replace(e,t)},attachComments:function(e,t,n){var r,i,a,o,s=[];if(!e.range)throw new Error("attachComments needs range information");if(n.length){for(a=0,i=t.length;a<i;a+=1)s.push(u(p(t[a]),n));o=0,c(e,{enter:function(e){if(e.range){for(var t;o<s.length&&!((t=s[o]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),s.splice(o,1)):o+=1;return o===s.length?l.Break:s[o].extendedRange[0]>e.range[1]?l.Skip:void 0}}}),o=0,c(e,{leave:function(e){if(e.range){for(var t;o<s.length&&(t=s[o],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),s.splice(o,1)):o+=1;return o===s.length?l.Break:s[o].extendedRange[0]>e.range[1]?l.Skip:void 0}}})}else if(t.length){for(a=0,i=t.length;a<i;a+=1)(r=p(t[a])).extendedRange=[0,e.range[0]],s.push(r);e.leadingComments=s}return e},VisitorKeys:r,Controller:i}});
//# sourceMappingURL=sourcemaps/estraverse.js.map
